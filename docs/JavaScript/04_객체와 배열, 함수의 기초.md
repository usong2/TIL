# 04 객체와 배열, 함수의 기초

## 4.1 객체의 기초 ① 객체 리터럴

자바스크립트에서는 원시 타입을 제외한 모든 값이 객체입니다. 객체는 자바스크립트에서 가장 중요한 데이터 타입입니다. 객체는 객체 리터럴과 생성자로 생성할 수 있습니다. 

<br />

### 4.1.1 객체

객체는 이름과 값을 한 쌍으로 묶은 데이터를 여러 개로 모은 것입니다. 즉, 객체는 데이터 여러 개를 하나로 모은 복합 데이터로 **연관 배열** 또는 **사전**이라고도 부릅니다. 예를 들어 트럼프 카드를 표현하는 객체는 아래와 같이 설명할 수 있습니다. 

<table>
    <thead>
    	<tr>
        	<th>이름</th>
        	<th>값</th>
        </tr>
    </thead>
    <tbody>
    	<tr>
        	<td>suit</td>
        	<td>"하트"</td>
        </tr>
        <tr>
        	<td>rank</td>
        	<td>"A"</td>
        </tr>
    </tbody>
</table>

객체에 포함된 데이터 하나(이름과 값의 쌍)을 가리켜 객체의 **프로퍼티**라고 부릅니다. suit과 rank는 프로퍼티이며  프로퍼티의 이름 부분을 **프로퍼티 이름** 또는 **키**라고 부릅니다. 

자바스크립트로 객체를 생성하는 방법은 두 가지 입니다. 하나는 객체 리터럴을 사용하는 방법이고 나머지 하나는 생성라는 함수를 사용하는 방법입니다. 

<br />

### 4.2.1 객체 리터럴로 객체 생성하기

다음 코드는 트럼프 카드의 하트 , 정보를 객체 리터럴로 표현한 것입니다. 

```javascript
var card = { suit: "하트", rank: "A" };
```

{ ... } 부분이 바로 객체 리터럴이며, 객체 리터럴은 변수 card에 대입하고 있습니다. 프로퍼티 이름과 프로퍼티 값은 suit: "하트"처럼 콜론(:)을 사용하여 구분하며, 중괄호({}) 안에 있는 프로퍼티들은 쉼표(,)로 구분합니다. 프로퍼티 이름으로는 모든 식별자와 문자열 리터럴(빈 문자열도 사용 가능)을 사용할 수 있습니다. 즉, 앞 코드에 있는 프로퍼티 이름은 문자열로 바꾸어 작성할 수 있습니다. 

```javascript
var card = { "suit": "하트", 'rank': "A" };
```

프로퍼티 값에는 모든 데이터 타입의 값과 표현식을 대입할 수 있습니다. 

변수에 대입된 객체 안의 프로퍼티 값을 읽거나 쓸 때는 **마침표**(.) **연산자** 또는 **대괄호**([]) **연산자**를 사용합니다. 

```javascript
card.suit    // 하트
card["rank"] // A
```

여기에서 마침표 다음에 문자열이 붙어 있지 않다는 점과 대괄호 안이 문자열로 채워져 있다는 점을 주목하세요. 마침표로 프로퍼티를 읽거나 쓸 때는 프로퍼티 이름 즉, 식별자만 사용할 수 있습니다. 대괄호로 프로퍼티를 읽거나 쓸 때는 프로퍼티 이름 또는 문자열을 반환하는 표현식을 사용할 수 있습니다. 

객체가 없는 프로퍼티를 읽으려고 시도하면 undefined를 반환합니다. 

```javascript
card.color // undefined
```

선언되지 않은 변수를 읽으려고 시도하면 참조 오류가 발생하는 것과는 대조적입니다. 

객체 리터럴 안에 어떠한 프로퍼티도 작성하지 않으면 빈 객체가 생성됩니다. 

```javascript
var obj = {};
console.log(obj); // Object{}
```

<br />

### 4.1.3 프로퍼티 추가와 삭제

없는 프로퍼티 이름에 값을 대입하면 새로운 프로퍼티가 추가됩니다. 

```javascript
card.value = 14;
consoel.log(card) // Object {suit: "하트", rank: "A", value: 14}
```

delete 연산자를 사용하면 프로퍼티를 삭제할 수 있습니다. 

```javascript
delete card.rank;
console.log(card); // Object {suit: "하트", value: 14}
```

이처럼 자바스크립트의 객체는 실행 중에 프로퍼티를 자유롭게 추가하거나 삭제할 수 있습니다. 반면 Java와 C++ 등에서는 객체의 프로퍼티를 실행 중에 추가하거나 삭제할 수 없습니다. 

<br />

### 4.1.4 in 연산자로 프로퍼티가 있는지 확인하기

in 연산자를 사용하면 객체에 특정 프로퍼티가 있는지 확인할 수 있습니다. 코드를 다음과 같이 작성하면 프로퍼티가 객체에 포함되었을 때는 true를 반환하고 포함되지 않았을 때는 false를 반환합니다. 

```javascript
프로퍼티 이름을 뜻하는 문자열 in 객체명
```

<br />

```javascript
var card = { suit: "하트", rank: "A" };
console.log("suit" in card); // true
console.log("color" in card); // false
```

앞 코드에서 in 연산자가 조사하는 대상이 그 객체가 가진 프로퍼티와 그 객체가 상속받은 모든 프로퍼티라는 점을 주의합시다. 

원래 toString 프로퍼티는 card 객체 안에 없지만 다음 코드를 보면 toString 프로퍼티가 card에 있다는 결과가 나옵니다. 

```javascript
console.log("toString" in card) // true
```

이는 card가 Object 객체를 상속받았기 때문입니다. 

<br />

### 4.1.5 객체 리터럴 예제

객체 리터럴을 사용하는 몇 가지 예를 살펴보겠습니다. 

1. 좌표평면의 점을 표현하는 객체

   ```javascript
   var p = { x: 1.0, y: 2.5 };
   ```

2. 원을 표현하는 객체

   ```javascript
   var circle = {
       center: { x: 1.0, y: 2.0 }, // 원의 중심을 표현하는 객체
       radius: 2.5					// 원의 반지름
   }
   ```

   center 프로퍼티는 원의 중점을 표현하고 radius 프로퍼티는 원의 반지름을 표현합니다. center 프로퍼티의 값으로는 1에 등장한 좌표평면의 점을 표현하는 객체를 대입했습니다. 이처럼 객체의 프로퍼티 값으로 객체를 대입할 수 있습니다. 이때 원 중점의 x좌표는 다음 코드처럼 마침표 뒤에 프로퍼티 이름을 연결해서 표현할 수 있습니다. 

   ```javascript
   circle.center.x // 1.0
   ```

3. 회원 정보를 표현하는 객체

   ```javascript
   var person = {
       name: "초코송이",	// 회원 이름 
       age: 20			   // 나이
       sex: "여",		  // 성별
       married : false	  // 결혼 여부를 표현하는 논리값 
   }
   ```

<br />

### 4.1.6 메서드

프로퍼티에 저장된 값이 타입이 함수면 그 프로퍼티를 메서드라고 부릅니다. 

<br />

### 4.1.7 객체는 참조 타입

생성된 객체는 메모리의 영역을 차지하는 한 덩어리가 됩니다. 객체 타입의 값을 변수에 대입하면 그 변수에는 객체의 **참조**(메모리에서의 위치 정보)가 저장됩니다. 이때의 변수 상태를 가리켜 객체를 **참조하고 있다**라고 합니다. 

변수에 저장된 객체의 참조는 다른 원시 값과 마찬가지로 다른 변수에 저장할 수 있습니다. 

```javascript
var a = card;
```

그러면 변수 a가 card 객체를 참조하게 되므로 a로 card 객체를 읽거나 수정할 수 있습니다. 

```javascript
console.log(a.suit); // 하트
a.suit = "스페이드";
console.log(a.suit); // 스페이드
console.log(card.suit); // 스페이드
```

<br /><hr />

## 4.2 함수의 기초

함수는 자바스크립트 프로그래밍 언어를 규정하는 가장 중요한 구성 요소입니다. 

<br />

### 4.2.1 함수

수학에서의 함수는 주어진 입력 값 x에 대해 출력 값 y를 대응시키는 규칙입니다. 

함수의 이름을 f라고 할 때, 함수 값인 y는 f(x)라고 씁니다. 

자바스크립트에서의 함수는 일련의 처리를 하나로 모아 언제든 호출할 수 있도록 만들어 둔 것입니다. 자바스크립트의 함수는 언뜻 보기에 수학 함수와 다르지 않습니다. 입력 값을 받으면 출력 값으로 함수 값을 반환합니다. 수학 함수와 다른 점이라면 입력을 받은 후에 함수 안의 프로그램에서 특정 작업을 수행한다는 점입니다. 자바스크립트에서는 함수의 입력 값을 **인수**라고 부르고 함수의 출력 값을 **변환값**이라고 부릅니다. 

<br />

### 4.2.2 함수 선언문으로 함수 정의하기

함수는 function 키워드를 사용해서 정의합니다. 예를 들어 다음은 square 함수를 정의하는 코드입니다. 

```javascript
function square(x) { return x * x; }
```

이 함수는 인수의 제곱을 계산해서 반환합니다. 이 코드에서는 소괄호 안에 있는 x가 인수고 중괄호 안에 있는 코드가 함수가 실행하는 작업입니다. 앞 코드에서 함수가 처리하는 내용은 다음의 return 문 뿐입니다. 

```javascript
return x * x;
```

> return문 다음에는 줄 바꿈 문자를 넣지 말 것
>
> > return과 값 사이에 줄 바꿈 문자를 넣으면 자바스크립트 엔진이 세미콜론을 자동으로 추가해서 해석합니다. 예를 들어 다음 코드를 살펴봅시다. 
> >
> > ```javascript
> > return
> > x * x;
> > ```
> >
> > 자바스크립트 엔진은 이 코드를 다음과 같이 해석합니다. 
> >
> > ```javascript
> > return;
> > x * x;
> > ```
> >
> > 즉, 값이 없는 return 문으로 해석합니다. 

return 문이 실행되면 제어권이 함수를 호출한 코드로 되돌아가고, return 문에 지정된 값(앞 코드에서는 x * x : x와 x의 곱)은 함수의 반환값이 됩니다. 

<br />

### 4.2.3 함수 이름

변수 이름과 마찬가지로 모든 식별자를 함수 이름으로 사용할 수 있습니다. 그러나 함수 이름은 해당 함수의 기능을 이해하기 쉽게 지어야 합니다. 함수에 이름을 잘 붙이면 그 함수가 어떤 일을 하는지 주석을 보지 않고도 파악할 수 있으므로 프로그램의 가독성과 유지 보수성이 크게 높아집니다. 함수 이름은 일반적으로 동사 또는 동사로 시작된느 어휘로 만듭니다. 이때 캐멀 표기법 또는 밑줄 표기법을 사용하세요. 

```javascript
function saveImage(img) {...}
function getMousePisition(event) {...}
function load_file() {...}
```

<br />

### 4.2.4 함수 호출

함수를 호출하려면 함수 이름 뒤에 소괄호로 인수를 묶어 입력합니다. 

```javascript
square(3)
```

그러면 인수로 넘긴 값인 3이 함수 정의문의 인수 x로 전달되고, 중괄호 안에 작성된 코드를 실행합니다. 결과적으로 return 문의 값인 9가 함수의 반환값이 됩니다. 이때 함수를 호출할 때 전달하는 값을 **인수**(argument), 함수 정의문의 인수를 **인자**(parameter)라고 부릅니다. 

<br />

### 4.2.5 인수

함수는 인수를 여러 개 받을 수 있습니다. 인수가 여러 개라면 인수와 인수를 쉼표(,)로 구분합니다. 예를 들어 다음 함수 dist는 두 점 사이의 거리를 구하는 함수입니다. 이때 전달하는 인수 p와 q는 좌표평면의 점 하나를 표현하는 객체이며, 각각의 객체는 {x:1, y:2}라는 구조를 갖고 있습니다. 

```javascript
function dist(p, q){
    var dx = q.x - p.x;
    var dy = q.y - q.y;
    return Math.sqrt(dx*dx+dy*dy);
}
```

이 코드에 등장하는 Math.sqrt는 제곱근을 구하는 함수입니다. 함수 dist를 사용하여 두 점 사이의 거리를 구하는 코드는 다음과 같습니다. 

```javascript
var p1 = {x:1, y:1};
var p2 = {x:4, y:5};
var d = dist(p1, p2); // 5
```

인수를 받지 않는 함수도 정의할 수 있습니다. 

```javascript
var bark = function() { console.log("Box-wow"); }
bark(); // "Bow-wow"
```

bark 함수에는 인수도 없고 return 문도 없습니다. return 문이 실행되지 않은 상태에서 제어권이 함수를 호출한 코드로 되돌아가면 함수의 반환값이 undefined가 됩니다. 

```javascript
console.log(bark()); // undefined
```

<br />

### 4.2.6 함수의 실행 흐름

일반적인 함수의 실행 흐름은 다음과 같습니다

+ 호출한 코드에 있는 인수가 함수 정의문의 인자에 대입된다. 
+ 함수 정의문의 중괄호 안에 작성된 프로그램이 순차적으로 실행된다. 
+ return 문이 실행되면 호출한 코드로 돌아간다. return 문의 값은 함수의 반환값이 된다. 
+ return 문이 실행되지 않은 상태로 마지막 문장이 실행되면, 호출한 코드로 돌아간 후에 undefined가 함수의 반환값이 된다. 

<br />

### 4.2.7 함수 선언문의 끌어올림

자바스크립트 엔진은 변수 선언문과 마찬가지로 함수 선언문을 프로그램의 첫머리로 끌어올립니다. 함수 선언문은 프로그램의 어떤 위치에도 작성할 수 있습니다. 예를 들어 다음과 같이 함수를 정의하기 전에 함수를 실행하는 코드를 작성해도 문제없이 동작합니다. 

``` javascript
console.log(square(5)) // 25
function square(x) { return x * x; }
```

<br />

### 4.2.8 값으로서의 함수

자바스크립트에서는 함수가 객체입니다. 함수 선언문으로 함수를 선언하면 내부적으로는 그 함수 이름을 변수 이름으로 한 변수와 함수 객체가 만들어지고, 그 변수에 함수 객체의 참조가 저장됩니다. 

변수 값을 다른 변수에 할당하면 그 변수 이름으로 함수를 실행할 수 있습니다. 

```javascript
var sq = square;
console.log(sq(5)); // 25
```

또한 함수를 다른 함수의 인수로 넘길 수도 있습니다. 

<br />

### 4.2.9 참조에 의한 호출과 값에 의한 호출

함수는 원시 값을 인수로 넘겼을 때와 객체를 인수로 넘겼을 때 다르게 동작합니다. 먼저 인수가 원시 값일 때 어떻게 동작하는지 예제를 살펴보겠습니다. 

```javascript
function add1(x) { return x = x + 1; }
var a = 3;
var b = add1(3)
console.log("a = " + a + ", b = " + b); // a = 3, b = 4
```

add1은 전달받은 인수에 1을 더하여 반환하는 함수입니다. 이 함수가 호출될 때 변수 a의 복사본이 인자 x에 할당됩니다. 즉, 인수에 원시 값을 넘기면 그 값 자체가 인자에 전달됩니다. 

이를 가리켜 **값의 전달**이라고 부릅니다. 이때 변수 a와 변수 x는 다른 영역의 메모리에 위치한 별개의 변수입니다. 따라서 x 값을 바꾸더라도 a 값은 바뀌지 않습니다. 

다음으로 인수가 객체일 때 어떻게 동작하는지 예제를 살펴보겠습니다. 

```javascript
function add1(p) { p.x = p.x + 1; p.y = p.y + 1; return p; }
var a = { x:3, y:4 };
var b = add1(a);
console.log(a, b); // Object {x=4, y=5} Object {x=4, y=5}
```

이번에 등장한 add1 함수는 2차원 좌표의 각 성분에 1을 더한 좌표를 반환하는 함수입니다. 함수가 호출될 대 변수 a의 복사본이 인자 p에 할당됩니다. 여기까지는 원시 값을 인수로 넘겼을 때와 동일하게 동작합니다. 그러나 이전과 다르게 변수 a에 객체 {x:3, y:4}의 참조가 저장되어 있으며, 이 참조 값을 인자 p에 대입합니다. 즉, 인수로 객체를 넘겼을 때 전달되는 값은 참조 값입니다. 이를 가리켜 참조 전달이라고 부릅니다. 이때 인자 p와 변수 a는 똑같은 객체를 참조하고 있습니다. 따라서 함수 안에서 p.x와 p.y를 수정하는 행위는 a.x와 a.y를 수정하는 행위와 같습니다. 이처럼 함수의 인수로 객체를 넘기면 함수 안에서 원래의 객체를 바꿀 수 있습니다. 

