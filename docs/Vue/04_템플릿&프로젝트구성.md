# Vue.js

## 뷰 템플릿

### 뷰 템플릿이란?

뷰의 템플릿(Template)은 HTML, CSS 등의 마크업 속성과 뷰 인스턴스에서 정의한 데이터 및 로직들을 연결하여 사용자가 브라우저에서 볼 수 있는 형태의 HTML로 변환해 주는 속성입니다. <br />템플릿 속성을 사용하는 방법은 두 가지로, 첫 번째는 ES5에서 뷰 인스턴스의 template 속성을 활용하는 방법입니다. 지금까지 예제에서 주로 사용한 `template: <p>Hello {{ message }}</p>`와 같은 코드가 템플릿을 의미합니다. 

```vue
<script>
	new Vue({
       	template: '<p>Hello {{ message }} </p>' 
    });
</script>
```

여기서 템플릿 속성에 대해 한 가지 알아둘 특징이 있습니다. 사용자가 볼 수는 없지만 라이브러리 내부적으로 template 속성에서 정의한 마크업 + 뷰 데이터를 가상 돔 기반의 render() 함수로 변환합니다. 변환된 render() 함수는 최종적으로 사용자가 볼 수 있게 화면을 그리는 역할을 합니다. 그리고 변환 과정에서 뷰의 반응성(Reactivity)이 화면에 더해집니다. 

<br />

> <b>template 속성을 사용한 경우 vs 사용하지 않은 경우</b>
>
> > ```vue
> > <div id="app">
> > 	<h3>{{ message }}</h3>
> > </div>
> > 
> > <script>
> >   new Vue({
> > 	el: '#app',
> >     data: {
> >         message: 'Hello Vue.js!'
> >     }
> >   });
> > </script>
> > ```
>
>
> 위의 코드는 먼저 `<h3>{{ message }}</h3>`를 화면에 표시하고, 인스턴스가 생성되면 message의 값을 Hello Vue.js로 치환합니다. 오른쪽 코드는 `<div id="app">`에 아무런 내용이 없다가 인스턴스가 생성되면 `<h3>Hello Vue.js!</h3>`가 화면에 달라붙어 표시됩니다. <br />
>
> > ``` vue
> > <div id="app"></div>
> > 
> > <script>
> >   new Vue({
> > 	el: '#app',
> >     data: {
> >         message: 'Hello Vue.js!'
> >     },
> >     template: '<h3> {{ message }} </h3>'
> >   });
> > </script>
> > ```
>
> 두 코드는 최종적으로 화면에 나타내는 내용은 같고, 인스턴스의 내용이 적용되는 시점만 다릅니다. 

<br />

두 번째는 싱글 파일 컴포넌트 체계의 `<template>`코드를 활용하는 방법입니다. 
템플릿에서 사용하는 뷰의 속성과 문법은 다음과 같습니다. 

+ 데이터 바인딩
+ 자바스크립트 표현식
+ 디렉티브
+ 이벤트 처리
+ 고급 템플릿 기법

<br />

#### 데이터 바인딩

데이터 바인딩(Data Binding)은 HTML 화면 요소를 뷰 인스턴스의 데이터와 연결하는 것을 의미합니다. 주요 문법으로는 {{}} 문법과 v-bind 속성이 있습니다. <br />

##### {{ }} - 콧수염 괄호

{{ }}는 뷰 인스턴스의 데이터를 HTML 태그에 연결하는 가장 기본적인 텍스트 삽입 방식입니다. {{ }}는 모양이 콧수염과 비슷하다고 하여 콧수염 괄호라고 부릅니다. 뷰 뿐만 아니라 다른 언어나 프레임워크에서도 자주 사용되는 템플릿 문법(template syntax)입니다. 앞의 예제에서 계속 다뤘기 때문에 많이 익숙하겠지만 간단히 형식을 정리하면 다음과 같습니다. 

```vue
<div id="app">
    {{ message }}
</div>

<script>
	new Vue({
       el: '#app',
       data: {
       	message: 'Hello Vue.js!'     
       }
    });
</script>
```

위의 코드는 data 속성의 message 속성 값인 Hello Vue.js를 `<div>`태그 안의 {{ message }}에 연결하여 화면에 나타내는 코드입니다. 여기서 만약 data 속성의 message 값이 바뀌면 뷰 반응성에 의해 화면이 자동으로 갱신됩니다. 

<br />

만약 뷰 데이터가 변경되어도 값을 바꾸고 싶지 않다면 아래와 같이 v-once 속성을 사용합니다.

```vue
<div id="app" v-once>
    {{ message }}
</div>
```

<br />

##### v-bind

v-bind는 아이디, 클래스, 스타일 등의 HTML 속성(attributes) 값에 뷰 데이터 값을 연결할 때 사용하는 데이터 연결 방식입니다. 형식은 v-bind 속성으로 지정할 HTML 속성이나 props 속성 앞에 접두사로 붙여줍니다. 

> v-bind

```vue
<div id="app">
    <p v-bind:id="idA">아이디 바인딩</p>
    <p v-bind:class="classA">클래스 바인딩</p>
    <p v-bind:style="styleA">스타일 바인딩</p>
</div>

<script src="https://cdn.jsdelivr.net/npm/vue@2.5.2/dist/vue.js"></script>

<script>
    new Vue({
        el: '#app',
        data: {
            idA: 10,
            classA: 'container',
            styleA: 'color: blue'
        }
    });
</script>
```

위의 코드는 HTML의 기본 속성인 id, class, style의 앞에 v-bind:를 붙여서 뷰 인스턴스에 정의한 데이터 속성과 연결하여 화면에 나타내는 예제입니다. 코드를 실행하면 데이터의 값이 각 `<p>` 태그에 연결되어 화면에 나타납니다. 

실행 결과 화면을 보면 데이터 속성의 idA, classA, styleA 값이 화면의 요소에 각각 연결되어 나타난 것을 확인할 수 있습니다. 특히 styleA 속성은 스타일 값이 적용되면서 바로 화면에 반영되어 나타납니다. 

추가로 v-bind: 문법을 :로 간소화할 수 있습니다. 예를 들어, v-bind:id와 :id는 같은 동작을 합니다. 이처럼 약식 문법을 사용할 때는 기본 문법과 약식 문법을 혼용해서 사용하지 않는 것이 좋습니다. 또한 뷰 코드가 전반적으로 v- 접두사를 붙이는 형태이기 때문에 가급적 v-bind 속성을 이용하는 것이 기존 HTML 문법과 구분도 되고 다른 사람이 코드를 파악하기도 쉽습니다. 

<br />

#### 자바스크립트 표현식

뷰의 템플릿에서도 자바스크립트 표현식을 쓸 수 있습니다. 데이터 바인딩 방법 중 하나인 [{ }] 안에 자바스크립트 표현식을 넣으면 됩니다. 

```vue
<div id="app">
    <p>{{ message }}</p>
    <p>{{ message + "!!!" }}</p>
    <p>{{ message.split('').reverse().join('')}}</p>
</div>

<script src="https://cdn.jsdelivr.net/npm/vue@2.5.2/dist/vue.js"></script>

<script>
    new Vue({
        el: '#app',
        data: {
            message: 'Hello Vue.js!'
        }
    });
</script>
```

첫 번째 `<p>` 태그는 message의 값 Hello Vue.js!를 그대로 출력합니다. 두 번째 `<p>` 태그는 message 값에 문자열 !!!를 추가하여 출력하기 때문에 Hello Vue.js!!!!가 출력됩니다. 세 번째 `<p>`태그는 문자열 Hello Vue.js!의 순서를 바꿔 !sj.euV olleH로 출력합니다. 문자열 순서를 바꾸기 위해 자바스크립트 내장 API를 사용하였습니다. 

<br />

##### 자바스크립트 표현식에서 주의할 점

자바스크립트 표현식을 사용할 때 주의할 점이 두 가지 있습니다. 첫째, 자바스크립트의 선언문과 분기 구문은 사용할 수 없습니다. 둘째, 복잡한 연산은 인스턴스 안에서 처리하고 화면에는 간단한 연산 결과만 표시해야 합니다. 

```vue
<div id="app">
    {{ var a=10; }} <!-- X, 선언문은 사용 불가능 -->
    {{ if(true) {return 100} }} <!-- X, 분기 구문은 사용 불가능 -->
    {{ true ? 100 : 0 }} <!-- O, 삼항 연산자로 표현 가능 -->

    {{ message.split('').reverse().join('') }} <!-- X, 복잡한 연산은 인스턴스 안에서 수행 -->
    {{ reversedMessage }} <!-- O, 스크립트에서 computed 속성으로 계산한 후 최종 값만 표현 -->
</div>

<script src="https://cdn.jsdelivr.net/npm/vue@2.5.2/dist/vue.js"></script>

<script>
    new Vue({
        el: '#app',
        data: {
            message: 'Hello Vue.js!'
        },
        computed: {
            reversedMessage: function(){
                return this.message.split('').reverse().join('');
            }
        }
    });
</script>
```

`{{ var a = 10; }}`은 자바스크립트 선언문이고, {{ if (true) {return 100} }}은 분기 구문이므로 브라우저로 실행하면 오류가 발생합니다. 만약 분기 구문과 동일한 로직을 처리하고 싶으면 자바스크립트의 삼항 연산자를 사용합니다. 따라서 {{ if (true) { return 100} }}에 삼항 연산자를 적용한 {{ true ? 100 : 0 }}으로 대체할 수 있습니다. 

그리고 message의 텍스트 값을 역순으로 변환하는 연산은 HTML 단에서 수행하지 않고, 자바스크립트 단에서 computed 속성을 이용하여 계산한 후 최종 결과 값만 표시합니다. 뷰에서 이러한 방식을 권하는 이유는 HTML에 최종적으로 표현될 값만 나타내고, 데이터의 기본 연산은 자바스크립트 단에서 함으로써 화면단 코드의 가독성을 높일 수 있기 때문입니다. 이렇게 되면 화면단 코드를 훨씬 빠르게 읽을 수 있어 화면의 UI 구조를 쉽게 파악할 수 있습니다. 

또한 반복적인 연산에 대해서는 미리 계산하여 저장해놓고, 필요할 때 바로 불러오는 캐싱(caching) 효과를 얻을 수 있습니다. 

> 캐싱
>
> > 데이터나 값을 임시 장소에 미리 복사해 놓는 동작. 일반적으로 데이터에 접근하는 시간이나 값을 다시 계산하는 시간이 오래 걸릴 때 해당 값을 미리 임시 장소에 저장해 놓고 필요할 때 바로 불러올 수 있기 때문에 수행 시간이 훨씬 빠름

<br />

#### 디렉티브

뷰 디렉티브(Directive)란 HTML 태그 안에 v- 접두사를 가지는 모든 속성들을 의미합니다. 앞에서 배운 v-bind 속성도 디렉티브에 해당됩니다. 

> 디렉티브 형식
>
> ```vue
> <a v-if="flag">Login</a>
> ```

위 `<a>`태그는 뷰 인스턴스 데이터 속성에 정의된 flag 값에 따라 보이기도 하고 안 보이기도 합니다. flag 값이 참(true)이면 'Login' 텍스트가 화면에 보일 것이고, 값이 거짓(false)이면 `<a>`전체가 표시되지 않아 텍스트가 화면에서 보이지 않습니다. 

<br />

디렉티브는 화면의 요소를 더 쉽게 조작하기 위해 사용하는 기능입니다. 뷰의 데이터 값이 변경되었을 때 화면의 요소들이 리액티브(Reactive)하게 반응하여 변경된 데이터 값에 따라 갱신됩니다. 이런 식으로 화면의 요소를 직접 제어할 필요 없이 뷰의 디렉티브를 활용하여 화면 요소들을 조작할 수 있습니다. 

<table>
    <thead>
    	<tr>
        	<th>디렉티브 이름</th>
            <th>역할</th>
        </tr>
    </thead>
    <tbody>
    	<tr>
        	<td>v-if</td>
            <td>지정한 뷰 데이터 갑싕 참, 거짓 여부에 따라 해당 HTML 태그를 화면에 표시하거나 표시하지 않습니다.</td>
        </tr>
        <tr>
        	<td>v-for</td>
            <td>지정한 뷰 데이터의 개수만큼 해당 HTML 태그를 반복 출력합니다.</td>
        </tr>
        <tr>
        	<td>v-show</td>
            <td>v-if와 유사하게 데이터의 진위 여부에 따라 해당 HTMl 태그를 화면에 표시하거나 표시하지 않습니다. 다만, v-if는 해당 태그를 완전히 삭제하지만 v-show는 css 효과만 display: none;으로 주어 실제 태그는 남아 있고 화면 상으로만 보이지 않습니다. </td>
        </tr>
        <tr>
        	<td>v-bind</td>
            <td>HTML 태그의 기본 속성과 뷰 데이터 속성을 연결합니다.</td>
        </tr>
        <tr>
        	<td>v-on</td>
            <td>화면 요소와 이벤트를 감지하여 처리할 때 사용합니다. 예를 들어, v-on:click은 해당 태그의 클릭 이벤트를 감지하여 특정 메서드를 실행할 수 있습니다.</td>
        </tr>
        <tr>
        	<td>v-model</td>
            <td>폼(form)에서 주로 사용되는 속성입니다. 폼에 입력한 값을 뷰 인스턴스의 데이터와 즉시 동기화합니다. 화면에 입력된 값을 저장하여 서버에 보내거나 watch와 같은 고급 속성을 이용하여 추가 로직을 수행할 수 있습니다. &lt;input&gt;, &lt;select&gt;, &lt;textarea&gt; 태그에만 사용할 수 있습니다.</td>
        </tr>
    </tbody>
</table>

